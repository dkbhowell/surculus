<!DOCTYPE html>
<html>
<head>

    <!--pluging in scripts here-->
    <!--Jquery in scripts here-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <!--Insert Twitter JS Lib-->
    <script sync src="https://platform.twitter.com/widgets.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // this function runs when the DOM is ready, i.e. when the document has been parsed
            var root_dir = "companies/";
            var companies = ["TeslaMotors"];
            var year = "2015";
            var month = "04";
            var day = "10";
            var date = year + "-" + month + "-" + day;
            var dir = root_dir + companies[0] + "/" + date;
            tweet_div = document.getElementById("tweet");



            $.getJSON( dir + "/top_tweets_fixed" , function(data){
                json = data;

                var new_div = document.createElement("div");
                new_div.id = date + "_div";
                document.body.appendChild(new_div);

                var btn = document.createElement("BUTTON");
                var t = document.createTextNode(date);     // Create a text node
                btn.appendChild(t);
                new_div.appendChild(btn);

                for(i = 0; i < json.length; i++){
                    var tweet_item = json[i]
                    url = "https://twitter.com/id/status/" + encodeURIComponent(tweet_item.id_str);

                    var tweet = new_div//document.getElementById("tweet");
                    var id = tweet_item.id_str;

                    twttr.widgets.createTweet(
                            id, tweet,
                            {
                                conversation: 'all',    // or all
                                cards: 'visible',  // or visible
                                linkColor: '#cc0000', // default is blue
                                theme: 'light'    // or dark
                            })
                            .then(function (el) {
                                el.contentDocument.querySelector(".footer").style.display = "none";
                            });
                }
            });



            $.getJSON("TeslaMotorsNews.json", function (data) {
                json = data;
                var new_div = document.createElement("div");
                new_div.id = "news" + "_div";
                document.body.appendChild(new_div);

                for (i = 0; i < data.length; i++) {
                    var news_item = data[i];
                    var title = news_item.Title;
                    var url = news_item.Url

                    a = document.createElement("a");
                    a.href = url;
                    a.innerHTML = title;
                    new_div.appendChild(a);
                    var linebreak = document.createElement("br");
                    new_div.appendChild(linebreak)
                }
            });


        });

    </script>
    <!--Insert style for tweet-->
    <style>

        #tweet {
            width: 400px !important;
        }

        #tweet iframe {
            border: none !important;
            box-shadow: none !important;
        }

    </style>

</head>


<body>

    <p>Tweets</p>
    <div id="tweet"></div>

    <p>News</p>
    <div id="news_div"></div>


</body>
</html>
